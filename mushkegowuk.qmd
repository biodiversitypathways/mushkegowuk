---
title: "Report on the use of passive acoustic and remote camera monitoring for the Mushkegowuk Council"
format:
  html:
    grid:
      margin-width: 300px
navbar: right
theme: cosmo
date: "`r format(Sys.time(), '%d %B, %Y')`"
author: 
  - name: "Alex MacPhail"
    affiliation: "Biodiversity Pathways Ltd."
  - name: "Jack Creeggan"
    affiliation: "Biodiversity Pathways Ltd."
  - name: "Hope Hill"
    affiliation: "Mushkegowuk Council"
editor: visual
bibliography: references.bib
nocite: '@*'
toc: true
toc-depth: 3
toc-expand: true
toc-location: left
styles: styles.css
github: https://github.com/biodiversitypathways/mushkewowuk
---

![]()

```{r}
#| label: load-packages and authenticate
#| include: false
#| echo: false
#| eval: true
#| warning: false
#| message: false

library(tidyverse)
library(leaflet)
library(wildrtrax)
library(sf)
library(ggridges)
library(kableExtra)
library(plotly)
library(DT)
library(vegan)

wt_auth()

load('mushkegowuk.RData')
#save.image('mushkegowuk.RData')
```

# Abstract

::: {.callout-note collapse="true" style="background-color: #f4f4f4; padding: 20px;"}
This report is dynamically generated, meaning its results may evolve with the addition of new data or further analyses. For the most recent updates, refer to the publication date and feel free to reach out to the authors.
:::

```{r Data download}
#| warning: false
#| message: false
#| echo: true
#| eval: false
#| include: true
#| code-fold: true

# Download data from WildTrax
mc_aru <- wt_get_projects("ARU") |>
  filter(grepl("Mushkegowuk", project)) |>
  pull(project_id) |>
  wt_download_report('ARU', 'main') |>
  bind_rows() |>
  mutate(year = year(recording_date_time))

mc_cam <- wt_get_projects("CAM") |>
  filter(grepl("Mushkegowuk", project)) |>
  pull(project_id) |>
  wt_download_report('CAM', 'main') |>
  bind_rows() |>
  mutate(year = year(image_date_time))

mc_locs <- wt_get_view("organization_locations", organization = 5843)
  
```

# Land Acknowledgement



# Introduction

In 2025, the Mushkegowuk Council initiated a program incorporating autonomous recording units (ARUs) for passive acoustic monitoring of the vocalizing wildlife and remote camera traps for monitoring other wildlife. ARUs are compact environmental sensors that are designed to passively record the environment (@aru-overview), capturing vocalizing species like birds and amphibians, which is growing in use across the globe (@lots-of-pam). This technology enables resource managers to conduct prolonged surveys with minimal human interference. The subsequent data collected by these units contribute valuable information to metrics that can be used to study species trends over time, whereby this data aids decision-making and management within the region. Given the rapid and ease of accumulating data from these units, maintaining a high standard of data integrity is paramount to ensure future data interoperability and sharing. [WildTrax](https://www.wildtrax.ca) is an online platform developed by the [Alberta Biodiversity Monitoring Institute (**ABMI**)](https://abmi.ca) for users of environmental sensors to help addresses these big data challenges by providing solutions to standardize, harmonize, and share data.

The report summarizes the data collected from the ARUs by the Mushkegowuk Council in 2025. To enhance accessibility and reproducibility, the findings will be presented in this online report with fully documented code, allowing future updates as data collection methods become standardized. Additionally, recommendations will be developed to refine data transcription priorities, improve annual reporting methods, and evaluate recommendations for long-term monitoring. The objectives of this report are to:

-   Document and standardize the data management and processing procedures for acoustic data collected to ensure consistency and reproducibility.
-   Provide a comprehensive report detailing all detected species and the abundance of individuals within the surveyed area.
-   Facilitate the publication of data, making it accessible to the community, public, resource managers, academic institutions, and other relevant agencies to promote transparency and collaboration.
-   Use evaluation results to establish robust metrics that can inform long-term monitoring and conservation strategies.

# Methods

## Data collection

Locations were ... 

```{r}
#| warning: false
#| echo: true
#| eval: true
#| message: false
#| include: true
#| collapse: true
#| code-fold: true
#| fig-align: center
#| fig-cap: Locations from Mushkegowuk Council
#| label: fig-monitoring-locations

mc_locs_sf <- mc_locs |>
  select(locationName, latitude, longitude, recordingCount, imageCount) |>
  distinct() |>
  drop_na(latitude) |>
  sf::st_as_sf(coords = c("longitude","latitude"), crs = 4326)

leaflet() %>%
  addTiles() %>%
  addCircleMarkers(
    data = mc_locs,
    popup = ~paste("Location:", locationName, "<br>"),
    fillOpacity = 1,
    color = "black", 
    radius = 6 
  ) %>%
  addMeasure(primaryLengthUnit = "meters", primaryAreaUnit = "sqmeters") %>%
  addMiniMap(position = "bottomleft")

```

```{r}
#| warning: false
#| echo: false
#| eval: true
#| message: false
#| include: true
#| label: tbl-loc-summary
#| collapse: true
#| tbl-cap: Locations surveyed across years. Ones indicated a deployment in that year for that location.
  
datatable(mc_locs_sf, 
          options = list(
            searching = TRUE,  
            paging = TRUE,    
            pageLength = 10   
          ))
```

## Data processing

Recordings and images were uploaded to WildTrax for processing and can be downloaded from the platform's Recordings and Image Sets tab.

::: {.callout-note collapse="true" style="background-color: #f4f4f4; padding: 20px;"}
Advanced users can also use `wildrtrax` with `wt_get_sync(api = "organization_recordings", organization = 5843)`. Ensure you have correct access to the Organization as these projects are not currently published `r Sys.Date()`.
:::

![Downloading a list of recordings from WildTrax](assets/nsma-recs.png){#fig-download-recs}

The principal goal for data processing was to describe the acoustic community of species heard at locations while choosing a large enough subset of recordings for analyses. To ensure balanced replication, for each location and year surveyed, four randomly selected recordings were processed for 3-minutes between the hours of 3:00 AM - 7:59 AM (dawn period) and 20:00 - 23:59 PM (dusk period), ideally on four separate dates. Four samples ensures that there is minimum number of samples being able to detect most species. Tags are made using count-removal (see @farnsworth2002removal, @time-removal) where tags are only made at the time of first detection of each individual heard on the recordings. We also verified that all tags that were created were checked by a second observer (n = )  to ensure accuracy of detections (see @tbl-verified). 

Amphibian abundance was estimated at the time of first detection using the [North American Amphibian Monitoring Program](https://www.usgs.gov/centers/eesc/science/north-american-amphibian-monitoring-program) with abundance of species being estimated on the scale of "calling intensity index" (CI) of 1 - 3. Mammals such as Red Squirrel, were also noted on the recordings. After the data are processed in WildTrax, the [wildrtrax](https://abbiodiversity.github.io/wildrtrax/) package is used to download the data into a standard format prepared for analysis. The `wt_download_report` function downloads the data directly to a R framework for easy manipulation (see [wildrtrax APIs](https://abbiodiversity.github.io/wildrtrax/articles/apis.html)).
  
## Analysis



To evaluate species richness and activity patterns, we grouped the data by year and location using the `dplyr` R package identifying unique species detected in tasks processed within WildTrax. This enabled the creation of species richness and activity plots for the results using `ggplot`. We used the `vegan` package in R to construct a species accumulation curve, assessing the sampling effort required to capture species richness. The analysis utilized a species-by-site matrix and employed a randomized accumulation method with 100 permutations to provide robust estimates of species richness as sampling sites increased. To support site prioritization, we created a composite score through a weighted sum of three factors: the need for repeat surveys, the species richness observed at each site, and any existing project-specific priorities, here, any species-at-risk.

# Results



# Discussion

To ensure the integrity and consistency of a long-term monitoring program, it is important to maintain a consistent survey schedule and timing each year when deploying ARUs. This consistency helps reduce variation caused by seasonal differences in species presence or activity. Additionally, the importance of regular maintenance and calibration of ARU equipment, particularly microphones, which degrade over time and can affect data quality if not properly managed after prolonged field use (see @arus-mics). Surveying locations with a history of monitoring over multiple years is key to tracking changes in species composition and detecting long-term trends. By including sites with both high and low species diversity, we can better understand how habitats and species ranges are shifting over time. Sites where species-at-risk are present are also prioritized to support conservation efforts. Together, these considerations inform the prioritized list of key sampling sites across the NSMA region, as summarized in Table @tbl-prioritization.

```{r}
#| warning: false
#| echo: true
#| eval: false
#| message: false
#| include: true
#| collapse: true
#| code-fold: true
#| label: tbl-prioritization
#| tbl-cap: Prioritization

repeat_priority <- locs_summary |>
  rowwise() |>
  mutate(priority = sum(c_across(`2022`:`2024`), na.rm = TRUE)) |>
  ungroup() |>
  arrange(-priority)

rich_priority <- spp_rich_location |> group_by(location) |> summarise(priority = mean(species_count)) |> arrange(-priority)

soi_priority <- nsma_main |>
  filter(species_common_name %in% soi) |>
  select(location, latitude, longitude, recording_date_time, species_common_name)  |>
  group_by(location) |>
  summarise(priority = n_distinct(species_common_name))

prioritization_matrix <- repeat_priority |>
  rename(location = Location) |>
  left_join(rich_priority, by = "location", suffix = c("_repeat", "_rich")) |>
  left_join(soi_priority, by = "location", suffix = c("", "_soi")) |>
  mutate(
    priority_repeat = ifelse(is.na(priority_repeat), 0, priority_repeat),
    priority_rich = ifelse(is.na(priority_rich), 0, priority_rich),
    priority = ifelse(is.na(priority), 0, priority)
  ) |>
  mutate(combined_priority = priority_repeat * 2 + priority_rich + priority) |> # Created a weighted-sum
  select(location, combined_priority) |>
  arrange(-combined_priority)

datatable(prioritization_matrix, 
          options = list(
            searching = TRUE,  
            paging = TRUE,    
            pageLength = 10   
          ))
```

As this monitoring is led by Indigenous communities, it is guided by local knowledge, values, and priorities to protect the land and wildlife. By combining new technologies and sampling technique with traditional knowledge, the program contributes to building a comprehensive, long-term understanding of biodiversity in the region. Ongoing monitoring will help track the impacts of climate change. This information will help to support communities in protecting their environment and cultural connections while strengthening resilience for the future.
